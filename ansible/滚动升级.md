### 问题：
ansible控制服务滚动升级  

### 解决办法：
```
---
- hosts: all
  max_fail_percentage: 0
  serial:
  - 1
  - "50%"
  - "100%"
```
##### max_fail_percentage:   
是指最大失败比例，满足了就中止部署，这里设置为0，
意思是只要失败就中止
##### serial：  
串行部署数量/比例设置。这里的意思是，先部署1台，再部署剩下机器的50%，  
最后部署剩下机器的100%。
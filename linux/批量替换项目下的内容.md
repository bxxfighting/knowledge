### 问题：

由于项目下某一名词变化，需要将项目中所有'美丽的少年 林肯'改成'美丽的少女 苏菲'。

项目中的所有文件及子目录都在目录/home/project/下。

### 解决办法：

```
sed -i "s/美丽的少年 林肯/美丽的少女 苏菲/" `grep -rl '美丽的少年 林肯' /home/project/`
```

这里sed的-i参数是直接替换原文件中的内容

grep的-r参数是查找目录下的子目录

grep的-l参数是只显示有相应匹配内容的文件名

所以，整个命令的意思就是：先通过grep搜索到包含'美丽的少年 林肯'的文件，然后让sed将这些文件中的'美丽的少年 林肯' 替换成 '美丽的少女 苏菲'。

### 延伸：

其实实际遇到这个情况是在我们的项目代码中，代码是通过git管理的。而且我们确定要替换的文件都是在git下管理的。所以可以将上述命令修改成：

```
sed -i "s/美丽的少年 林肯/美丽的少女 苏菲/" `git grep -l '美丽的少年 林肯' /home/project/`
```

使用git grep会比grep快很多。但是注意原来的-r参数，git grep是不支持的，因为git grep本身就会查找子目录。

如果现在其实我们只想替换后缀为.py的文件中的内容，那么再加上find，命令如下：

```
sed -i "s/美丽的少年 林肯/美丽的少女 苏菲/" `find . -name "*.py" | xargs git grep -l '美丽的少年 林肯' /home/project/`
```

